webpackJsonp([10],{"96jX":function(t,e){},"Fx+b":function(t,e){},WKVu:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o,r=s("fZjL"),n=s.n(r),l=s("Dd8w"),a=s.n(l),c=s("uaSg"),d=s("bOdI"),u=s.n(d),f=(s("dKGA"),s("kSul")),h=s.n(f),m=(s("jgNZ"),s("syWm")),p=s.n(m),y=(i={},u()(i,p.a.name,p.a),u()(i,h.a.name,h.a),{components:(o={},u()(o,p.a.name,p.a),u()(o,h.a.name,h.a),o),name:"productlist",props:["productlist","theme"],methods:{gotoDetail:function(t){t.skuId,this.$emit("gotoDetail",t)}}}),v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"productlist"}},[s("yd-list",{attrs:{theme:t.theme}},t._l(t.productlist,function(e,i){return s("yd-list-item",{key:i,nativeOn:{click:function(s){t.gotoDetail(e)}}},[s("div",{attrs:{slot:"img"},slot:"img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.url,expression:"item.url"}]}),t._v(" "),0==e.isAvalible?s("i",{staticClass:"sell-out"}):t._e()]),t._v(" "),s("span",{staticStyle:{"font-weight":"normal",color:"#000"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.skuName))]),t._v(" "),s("yd-list-other",{attrs:{slot:"other"},slot:"other"},[s("div",[s("span",{staticClass:"demo-list-price",staticStyle:{color:"red"}},[s("em",[t._v("¥")]),t._v(t._s(e.salePrices))]),t._v(" "),s("span",{staticClass:"demo-list-del-price",staticStyle:{"font-size":".2rem","text-decoration":"line-through"}},[s("em",[t._v("¥")]),t._v(t._s(e.retailPrices))])]),t._v(" "),s("div",[s("span",{staticStyle:{color:"#6e6f70"}},[t._v("已售 "),s("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.salesCount?e.salesCount:"0"))]),t._v(" | "),s("span",{staticStyle:{color:"#6e6f70"}},[t._v("评论")]),t._v(" "),s("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.reviewCount?e.reviewCount:"0"))])]),0==e.isAvalible?s("span",{staticStyle:{"font-weight":"bold",color:"#d41d0f"}},[t._v(t._s(e.unAvalibleReson))]):t._e()])])],1)}))],1)},staticRenderFns:[]};var g=s("VU/8")(y,v,!1,function(t){s("Fx+b"),s("XfZx")},"data-v-6fa5c8dc",null).exports,b=s("NYxO"),_=(a()({},Object(b.b)(["scrollPosion"])),{computed:a()({},Object(b.b)(["scrollPosion"])),components:{productlist:g},data:function(){return{theme:1,categoryId:"",page:1,pageSize:10,sortType:0,minPrice:"",maxPrice:"",queryKey:"",show4:!1,zh:"#ff0000",xl:"#6d6d6d",jg:"#6d6d6d",list:[],screenlist:[],selectscreenlist:[],priceSorting:1}},mounted:function(){var t=this;document.getElementById("scrollView").addEventListener("scroll",function(){var e=document.getElementById("scrollView").scrollTop;t.$store.dispatch("setscrollPosion",e)})},beforeRouteEnter:function(t,e,s){s(function(t){"productsDetail"!=e.name?(t.categoryId="",t.$route.query.categoryId&&(t.categoryId=t.$route.query.categoryId),t.queryKey="",t.$route.query.queryKey&&(t.queryKey=t.$route.query.queryKey),t.show4=!1,t.xl="#6d6d6d",t.zh="#ff0000",t.jg="#6d6d6d",t.list=[],t.sortType=0,t.page=1,t.products()):document.getElementById("scrollView").scrollTop=t.scrollPosion})},methods:{gotoback:function(){this.$router.go(-2)},changeClass:function(){1==this.theme?this.theme=4:this.theme=1},search:function(){this.loadList()},screenIng:function(){this.show4=!this.show4;var t=n()(this.screenlist);t&&t.length>0||this.mallbrands()},reset:function(){for(var t in this.screenlist)this.screenlist[t].forEach(function(t){t.select=!1});this.maxPrice="",this.minPrice=""},screenOk:function(){this.show4=!this.show4;var t=[];for(var e in this.screenlist)this.screenlist[e].forEach(function(e){1==e.select&&t.push(e.brandId)});this.selectscreenlist=t,this.loadList()},mallbrands:function(){var t=this;Object(c.a)(this,"/api/brand/store/brands",{store:"1"},"get","",function(e){for(var s in e.brands)e.brands[s].forEach(function(t){t.select=!1});t.screenlist=e.brands})},products:function(){var t={categoryId:this.categoryId,page:this.page,pageSize:this.pageSize};0!=this.sortType.length&&(t.sortType=this.sortType),0!=this.maxPrice.length&&(t.maxPrice=this.maxPrice),0!=this.minPrice.length&&(t.minPrice=this.minPrice),0!=this.queryKey.length&&(t.queryKey=this.queryKey),0!=this.selectscreenlist.length&&(t.brandIds=this.selectscreenlist.join(","));var e=this;Object(c.a)(this,"/api/mall/products",t,"post",1==this.page?"加载中...":"",function(t){1==e.page?t.skus?(e.list=t.skus,e.$refs.pullrefreshDemo.$emit("ydui.pullrefresh.finishLoad"),e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit")):e.list=[]:t.skus?(e.list=e.list.concat(t.skus),t.skus&&e.page==t.totalPages?e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone"):e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.finishLoad")):e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone")})},priceSor:function(){this.xl="#6d6d6d",this.zh="#6d6d6d",this.jg="#ff0000",1==this.sortType?this.sortType=2:2!=this.sortType&&""!=this.sortType&&3!=this.sortType||(this.sortType=1),this.loadList()},sales:function(){this.xl="#ff0000",this.zh="#6d6d6d",this.jg="#6d6d6d",this.sortType=3,this.loadList()},comprehensive:function(){this.xl="#6d6d6d",this.zh="#ff0000",this.jg="#6d6d6d",this.sortType=0,this.loadList()},loadList:function(){this.page=1,this.products()},loadMore:function(){this.page=this.page+1,this.products()},gotoDetail:function(t){this.$router.push({name:"productsDetail",query:{skuId:t.skuId}})}}}),x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("yd-layout",{attrs:{id:"prolist"}},[s("yd-navbar",{attrs:{slot:"navbar",title:"商品列表",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[s("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[s("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),s("div",{staticStyle:{"background-color":"#ffffff"},attrs:{slot:"navbar",id:"my_search"},slot:"navbar"},[s("yd-flexbox",{staticStyle:{margin:"8px 0","margin-left":"20px"}},[s("yd-flexbox-item",{attrs:{id:"searchId"}},[s("form",{attrs:{action:"javascript:return true;"}},[s("span",{staticClass:"icon_search"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.queryKey,expression:"queryKey"}],staticClass:"search",attrs:{type:"search",placeholder:"点击搜索"},domProps:{value:t.queryKey},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.search()},input:function(e){e.target.composing||(t.queryKey=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"classification",on:{click:t.changeClass}},[1==t.theme?s("yd-icon",{attrs:{slot:"icon",name:"changyongfenlei",size:".42rem",custom:"",color:"#dcdcdc"},slot:"icon"}):4==t.theme?s("yd-icon",{attrs:{slot:"icon",name:"liebiao",size:".42rem",custom:"",color:"#dcdcdc"},slot:"icon"}):t._e()],1)],1)],1),t._v(" "),s("yd-flexbox",{attrs:{slot:"navbar"},slot:"navbar"},[s("yd-flexbox-item",[s("yd-button",{attrs:{size:"large",type:"hollow",bgcolor:"#fff",color:t.zh},nativeOn:{click:function(e){t.comprehensive()}}},[t._v("综合\n      ")])],1),t._v(" "),s("yd-flexbox-item",[s("yd-button",{attrs:{size:"large",type:"hollow",bgcolor:"#fff",color:t.xl},nativeOn:{click:function(e){t.sales()}}},[t._v("销量")])],1),t._v(" "),s("yd-flexbox-item",[s("yd-button",{attrs:{size:"large",type:"hollow",bgcolor:"#fff",color:t.jg},nativeOn:{click:function(e){t.priceSor()}}},[t._v("价格\n        "),1==t.sortType?s("icon",{attrs:{name:"jg-sx",scale:1.5}}):t._e(),t._v(" "),2==t.sortType?s("icon",{attrs:{name:"jg-jx",scale:1.5}}):t._e(),t._v(" "),"#6d6d6d"==t.jg?s("icon",{attrs:{name:"jg-mr",scale:1.5}}):t._e()],1)],1),t._v(" "),s("yd-flexbox-item",[s("yd-button",{attrs:{size:"large",bgcolor:"#fff",type:"hollow",color:"#6d6d6d"},nativeOn:{click:function(e){t.screenIng()}}},[t._v("筛选\n        "),s("icon",{attrs:{name:"sx",scale:1.5}})],1)],1)],1),t._v(" "),s("yd-pullrefresh",{ref:"pullrefreshDemo",attrs:{callback:t.loadList}},[s("yd-infinitescroll",{ref:"infinitescrollDemo",attrs:{callback:t.loadMore}},[s("productlist",{attrs:{slot:"list",productlist:t.list,theme:t.theme},on:{gotoDetail:t.gotoDetail},slot:"list"}),t._v(" "),s("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[t._v("我是有底线的")])],1)],1),t._v(" "),s("yd-popup",{attrs:{position:"right",width:"70%"},model:{value:t.show4,callback:function(e){t.show4=e},expression:"show4"}},[s("div",{staticClass:"splb2",staticStyle:{"margin-bottom":"1rem"},attrs:{slot:"top"},slot:"top"},[s("p",{staticClass:"splb3"},[t._v("价格区间")]),t._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.minPrice,expression:"minPrice"}],staticClass:"splb4",staticStyle:{"border-radius":"3px"},attrs:{type:"number",placeholder:"最高价"},domProps:{value:t.minPrice},on:{input:function(e){e.target.composing||(t.minPrice=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.maxPrice,expression:"maxPrice"}],staticClass:"splb5",staticStyle:{"border-radius":"3px"},attrs:{type:"number",placeholder:"最低价"},domProps:{value:t.maxPrice},on:{input:function(e){e.target.composing||(t.maxPrice=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"splb2",staticStyle:{"margin-bottom":"1rem"}},[s("p",{staticClass:"splb3"},[t._v("品牌")]),t._v(" "),t._l(t.screenlist,function(e,i){return s("ul",{key:i,staticClass:"brandlist"},[s("li",{staticClass:"firstli"},[s("p",[t._v(t._s(i))])]),t._v(" "),t._l(e,function(e,i){return s("li",{key:i,staticClass:"brandName"},[s("div",{staticStyle:{padding:"0.2rem 0"},on:{click:function(t){e.select=!e.select}}},[s("p",{class:{color:1==e.select},staticStyle:{width:"90%"}},[t._v(t._s(e.brandName))]),1==e.select?s("yd-icon",{attrs:{slot:"icon",name:"gou",size:".25rem",custom:"",color:"#d41d0f"},slot:"icon"}):t._e()],1)])})],2)})],2),t._v(" "),s("div",{attrs:{slot:"bottom"},slot:"bottom"},[s("yd-button",{staticClass:"screeningButton",attrs:{size:"large",type:"hollow"},nativeOn:{click:function(e){t.reset()}}},[t._v("重置")]),t._v(" "),s("yd-button",{staticClass:"screeningButton",attrs:{size:"large",type:"danger",bgcolor:"#d41d0f",color:"#ffffff"},nativeOn:{click:function(e){t.screenOk()}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var k=s("VU/8")(_,x,!1,function(t){s("eKot"),s("96jX")},"data-v-585e725a",null);e.default=k.exports},XfZx:function(t,e){},eKot:function(t,e){}});