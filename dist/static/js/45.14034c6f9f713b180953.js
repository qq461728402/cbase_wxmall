webpackJsonp([45],{"Qp/9":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("i9vB");var o,i=s("Mqtp"),n=s.n(i),a=s("bOdI"),r=s.n(a),c=(s("FDxC"),s("w+oK")),d=s.n(c),u=(s("SpPX"),s("yqud")),l=s.n(u),p=(s("69Li"),s("RI/5")),m=s.n(p),v=(s("mAGR"),s("NYHp")),k=s.n(v),g=(s("JtRP"),s("EJoZ")),h=s.n(g),_=(s("dKGA"),s("kSul")),f=s.n(_),b=(s("QP/A"),s("pyxX")),y=s.n(b),S=(s("cnGM"),s("S6j6")),w=s.n(S),x=(s("G/J0"),s("beN6")),M=s.n(x),C=(s("08XL"),s("24wo")),I=s.n(C),O=(s("jydU"),s("WQwN")),P=s.n(O),D=s("Dd8w"),N=s.n(D),B=s("yclV"),q=s("uaSg"),F=s("NYxO"),j={computed:N()({},Object(F.b)(["quantity"])),components:(o={},r()(o,P.a.name,P.a),r()(o,I.a.name,I.a),r()(o,M.a.name,M.a),r()(o,w.a.name,w.a),r()(o,y.a.name,y.a),r()(o,f.a.name,f.a),r()(o,h.a.name,h.a),r()(o,k.a.name,k.a),r()(o,m.a.name,m.a),r()(o,l.a.name,l.a),r()(o,d.a.name,d.a),r()(o,n.a.name,n.a),o),data:function(){return{screenWidth:document.body.clientWidth,showBase:!1,promotionSkuId:"",securitylst:["正品保障","正规发票","自营门店"],param:{},descriptions:[],sku:{tree:[],list:[],none_sku:!0,stock_num:1,collection_id:0,price:"",messages:[{datetime:"0",multiple:"0",name:"留言",type:"text",required:"0"}],hide_stock:!1,resetStepperOnHide:!0,resetSelectedSkuOnHide:!0},goods:{title:"",picture:""},quota:0,skuModel:{},goodsId:"",endTime:""}},mounted:function(){this.promotionSkuId=this.$route.query.promotionSkuId,this.getDetail();var t=this;window.onresize=function(){return window.screenWidth=document.body.clientWidth,void(t.screenWidth=window.screenWidth)}},methods:{gotoback:function(){this.$router.go(-1)},getDetail:function(){var t=this;Object(q.a)(this,"/api/promotion/promotion",{promotionSkuId:this.promotionSkuId},"get","加载中...",function(e){var s=e.promotion;1==s.limit&&(t.quota=s.limitQuantity),t.formatPrice(s.endTime),e.productOptions&&(t.sku.tree=e.productOptions),e.skus&&(t.sku.none_sku=!1,t.sku.list=e.skus),s&&(t.skuModel=s,t.sku.stock_num=s.stock,t.sku.price=s.price,t.sku.collection_id=s.productSkuId,t.goods.picture=s.image,t.goods.title=s.skuName,t.goodsId=s.productSkuId),t.productDesc()})},productDesc:function(){var t=this;Object(q.a)(this,"/api/mall/productDesc",{skuId:this.skuModel.productSkuId},"get","",function(e){e.images&&(e.images.descriptions&&(t.descriptions=e.images.descriptions),e.images.param&&(t.param=e.images.param))})},formatPrice:function(t){var e=new Date(t),s=e.getFullYear()+"/",o=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/",i=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",n=e.getHours()+":",a=e.getMinutes()+":",r=e.getSeconds();this.endTime=s+o+i+n+a+r},showPreview:function(t){n()(this.skuModel.images,t)},showPreviewDetail:function(t){n()(this.descriptions,t)},gotoCar:function(){this.$router.push({name:"shoppingCart",meta:{title:"购物车"}})},gotoOder:function(t){var e={};e.shippingType=this.skuModel.shippingType,e.promotionId=this.skuModel.promotionId;var s="",o="";t.selectedSkuComb?(s=t.selectedSkuComb.id,o=t.selectedSkuComb.price):(s=t.goodsId,o=this.skuModel.bonusPoints),e.messages=t.messages.message_0,e.productSkuId=s,e.quantity=t.selectedNum,e.bonusPoints=o,Object(B.e)("oderInfo",e),this.$router.push({name:"PointsSubmit"})},onClickMiniBtn:function(){var t=this.$store.getters.baseInfo;window.location.href="tel://"+t.storePhone}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("yd-layout",[s("yd-navbar",{attrs:{slot:"navbar",title:"商品详情",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[s("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[s("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),s("van-swipe",{staticStyle:{transform:"none"},style:{height:t.screenWidth+"px"},attrs:{autoplay:3e3}},t._l(t.skuModel.images,function(e,o){return s("van-swipe-item",{key:o,staticClass:"thumb"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"image"}],staticStyle:{"min-height":"100px"},on:{click:function(e){t.showPreview(o)}}})])})),t._v(" "),s("van-cell-group",[s("div",{staticStyle:{"border-top":"1px solid #eeeeee",height:"120px","border-bottom":"10px solid #eeeeee"}},[s("p",{staticStyle:{"font-size":"14px","text-align":"center","padding-top":"20px"}},[t._v(t._s(t.skuModel.skuName))]),t._v(" "),s("p",{staticStyle:{"font-size":"12px","text-align":"center","padding-top":"10px",color:"#999999"}},[t._v(t._s(t.skuModel.skuDescription))]),t._v(" "),s("p",{staticStyle:{"text-align":"center","padding-top":"10px"}},[s("em",{staticStyle:{color:"red","font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.skuModel.bonusPoints)+"积分")]),t._v(" "),t._e()])])]),t._v(" "),s("van-cell-group",{staticStyle:{"margin-top":"0.2rem"}},[s("van-cell",[s("van-col",{staticStyle:{color:"#9c9c9c"},attrs:{span:"10"}},[t._v("剩余："+t._s(t.skuModel.stock)+"件")])],1)],1),t._v(" "),s("van-cell-group",{staticStyle:{"margin-top":"0.2rem","margin-bottom":"1.2rem"}},[s("van-cell",[t._v("\n      商品详情\n    ")]),t._v(" "),s("van-cell",[s("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","border-bottom":"1px solid #f5f5f5"},attrs:{span:"12"}},[t._v("等级"+t._s(t.param.greade))]),t._v(" "),s("van-col",{staticStyle:{"border-bottom":"1px solid #f5f5f5","padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("规格"+t._s(t.param.model))]),t._v(" "),s("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","padding-right":"0.2rem"},attrs:{span:"12"}},[t._v("单位"+t._s(t.param.unit))]),t._v(" "),s("van-col",{staticStyle:{"padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("产地"+t._s(t.param.place))])],1),t._v(" "),s("van-cell",{staticStyle:{padding:"0px",margin:"0","line-height":"normal"}},[s("div",{staticClass:"detal"},t._l(t.descriptions,function(e,o){return s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"img"}],key:o,on:{click:function(e){t.showPreviewDetail(o)}}})}))])],1),t._v(" "),s("van-goods-action",{attrs:{slot:"tabbar"},slot:"tabbar"},[s("van-goods-action-mini-btn",{attrs:{icon:"chat",text:"客服"},on:{click:t.onClickMiniBtn}}),t._v(" "),s("van-goods-action-big-btn",{attrs:{text:"立即兑换",primary:""},on:{click:function(e){t.showBase=!t.showBase}}})],1),t._v(" "),s("van-sku",{attrs:{slot:"tabbar",sku:t.sku,goods:t.goods,"goods-id":t.goodsId,"hide-stock":t.sku.hide_stock,quota:t.quota,"reset-stepper-on-hide":t.sku.resetStepperOnHide,"reset-selected-sku-on-hide":t.sku.resetSelectedSkuOnHide},on:{"buy-clicked":t.gotoOder},slot:"tabbar",scopedSlots:t._u([{key:"sku-header",fn:function(e){return[s("div",{staticClass:"van-sku-header van-hairline--bottom"},[s("div",{staticClass:"van-sku-header__img-wrap"},[s("img",{staticClass:"van-sku__goods-img",attrs:{src:t.skuModel.image}})]),t._v(" "),s("div",{staticClass:"van-sku-header__goods-info"},[s("div",{staticClass:"van-sku__goods-name van-ellipsis"},[t._v(t._s(t.skuModel.skuName))]),t._v(" "),s("div",{staticClass:"van-sku__goods-price"},[s("span",{staticClass:"van-sku__price-num"},[t._v(t._s(e.selectedSkuComb?e.selectedSkuComb.price:t.skuModel.bonusPoints)+"积分")])]),t._v(" "),s("van-icon",{staticClass:"van-sku__close-icon",attrs:{name:"close"},on:{click:function(t){e.skuEventBus.$emit("sku:close")}}})],1)])]}},{key:"sku-actions",fn:function(e){return[s("div",{staticClass:"van-sku-actions"},[s("van-button",{attrs:{type:"primary","bottom-action":""},on:{click:function(t){e.skuEventBus.$emit("sku:buy")}}},[t._v("立即兑换")])],1)]}}]),model:{value:t.showBase,callback:function(e){t.showBase=e},expression:"showBase"}})],1)},staticRenderFns:[]};var W=s("VU/8")(j,z,!1,function(t){s("XNGs")},"data-v-0c8bf406",null);e.default=W.exports},XNGs:function(t,e){},jydU:function(t,e,s){s("xL5C")}});