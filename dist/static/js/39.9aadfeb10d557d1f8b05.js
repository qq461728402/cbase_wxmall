webpackJsonp([39],{Ju2Z:function(t,e){},dlCD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("uaSg"),o=(s("yclV"),{data:function(){return{exchangeStore:!1,startDate:"",endDate:"",storeName:"",orderDate:"",skuId:"",itemId:"",stores:[],merchantId:""}},mounted:function(){this.skuId=this.$route.query.skuId,this.itemId=this.$route.query.itemId},methods:{gotoback:function(){this.$router.go(-2)},getStoreList:function(){var t=this;this.stores.length>0?this.exchangeStore=!this.exchangeStore:Object(r.a)(this,"/api/insurance/gift/sotres",{skuId:this.skuId},"post","加载中...",function(e){if(e.preorderTime){var s=new Date(e.preorderTime);t.startDate=formatDate(s,"yyyy-MM-dd"),t.endDate=t.getEndDate(e.preorderTime)}for(var r in e.stores)e.stores[r].select=!1;t.stores=e.stores,t.$nextTick(function(){t.exchangeStore=!t.exchangeStore})})},selectStore:function(t){for(var e in this.stores)this.stores[e].select=!1;this.stores[t].select=!0,this.storeName=this.stores[t].storeName,this.merchantId=this.stores[t].id,this.exchangeStore=!1},getAfterTomorrow:function(){var t=new Date;return t.setTime(t.getTime()+0),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},getEndDate:function(t){var e=new Date(t);return e.setTime(e.getTime()+27648e5),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},yy:function(){if(0!=this.merchantId.length)if(0!=this.orderDate.length){var t=this;Object(r.a)(this,"/api/insurance/gift/preorder",{skuId:this.skuId,itemId:this.itemId,preorderTime:this.orderDate,merchantId:this.merchantId},"post","预约中...",function(e){t.$dialog.toast({mes:"预约成功!",timeout:1e3,icon:"success",callback:function(){t.gotoback()}})})}else this.$dialog.toast({mes:"请输入预约时间",timeout:1e3});else this.$dialog.toast({mes:"请输入选择服务门店",timeout:1e3})}}}),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("yd-layout",[s("yd-navbar",{attrs:{slot:"navbar",title:"礼品预约",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[s("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[s("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),s("yd-cell-group",{staticStyle:{"margin-top":"10px"}},[s("yd-cell-item",{attrs:{arrow:"",type:"a"},nativeOn:{click:function(e){t.getStoreList()}}},[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("服务门店")]),t._v(" "),t.storeName?s("span",{staticClass:"main_2",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.storeName))]):s("span",{staticClass:"main_2",attrs:{slot:"right"},slot:"right"},[t._v("请选择服务门店")])]),t._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[t._v("预约时间")]),t._v(" "),s("span",{attrs:{slot:"right"},slot:"right"},[s("yd-datetime",{attrs:{"start-date":t.startDate,"end-date":t.endDate,type:"date"},model:{value:t.orderDate,callback:function(e){t.orderDate=e},expression:"orderDate"}})],1)])],1),t._v(" "),s("yd-button",{staticStyle:{margin:"0 10% 30%",width:"80%","background-color":"#d41d0f"},attrs:{slot:"tabbar",size:"large",type:"primary"},nativeOn:{click:function(e){t.yy(e)}},slot:"tabbar"},[t._v("立即预约")]),t._v(" "),s("yd-popup",{attrs:{position:"bottom",height:"60%"},model:{value:t.exchangeStore,callback:function(e){t.exchangeStore=e},expression:"exchangeStore"}},[s("div",{staticStyle:{height:"1rem","line-height":"1rem","border-bottom":"1px solid #edeeef"},attrs:{slot:"top"},slot:"top"},[s("span",{staticStyle:{"font-size":"0.3rem",color:"#666","padding-left":"0.2rem"}},[t._v("选择安装门店")]),t._v(" "),s("div",{staticClass:"close",on:{click:function(e){t.exchangeStore=!1}}})]),t._v(" "),s("ul",{staticClass:"storeList"},t._l(t.stores,function(e,r){return s("li",{on:{click:function(e){t.selectStore(r)}}},[s("yd-flexbox",[s("div",{staticStyle:{overflow:"hidden",padding:"0.15rem",height:"1.8rem",width:"1.8rem"}},[s("img",{staticStyle:{height:"1.5rem",width:"1.5rem"},attrs:{src:e.logo}})]),t._v(" "),s("yd-flexbox-item",{staticStyle:{height:"1.8rem",width:"75%"}},[s("yd-flexbox",{staticStyle:{"padding-top":"0.15rem"},attrs:{direction:"vertical"}},[s("yd-flexbox-item",[s("span",{staticStyle:{"font-size":"0.3rem"}},[t._v(t._s(e.storeName))])]),t._v(" "),s("yd-flexbox-item",[s("p",{staticStyle:{color:"#6e6f70","font-size":"0.25rem","line-height":"0.5rem",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v("\n                "+t._s(e.storeAddress))])]),t._v(" "),s("yd-flexbox-item",[s("span",{staticStyle:{color:"#6e6f70","font-size":"0.25rem","line-height":"0.5rem"}},[t._v("评价"),s("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.ratesCount?e.ratesCount:"0"))]),t._v(" |总订单"),s("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.orderCount?e.orderCount:"0"))])]),t._v(" "),s("span",{staticStyle:{float:"right","margin-right":"0.1rem"}},[s("button",{class:{storeSelectBtn:e.select,storeNoselectBtn:!e.select}},[t._v("\n                                    "+t._s(e.select?"已选择":"选择")+"\n                                  ")])])])],1)],1)],1)],1)}))])],1)},staticRenderFns:[]};var a=s("VU/8")(o,i,!1,function(t){s("Ju2Z")},"data-v-1a309c78",null);e.default=a.exports}});