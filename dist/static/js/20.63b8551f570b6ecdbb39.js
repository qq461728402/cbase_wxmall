webpackJsonp([20],{"08XL":function(t,e,o){o("xL5C"),o("Bcbh"),o("vQRh"),o("9nkg")},"G/J0":function(t,e,o){o("xL5C"),o("Bcbh"),o("vQRh")},KduV:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("i9vB");var s,i=o("Mqtp"),a=o.n(i),n=o("bOdI"),r=o.n(n),c=(o("FDxC"),o("w+oK")),d=o.n(c),l=(o("SpPX"),o("yqud")),u=o.n(l),p=(o("69Li"),o("RI/5")),m=o.n(p),v=(o("mAGR"),o("NYHp")),k=o.n(v),g=(o("JtRP"),o("EJoZ")),_=o.n(g),h=(o("dKGA"),o("kSul")),f=o.n(h),y=(o("QP/A"),o("pyxX")),b=o.n(y),w=(o("cnGM"),o("S6j6")),M=o.n(w),S=(o("G/J0"),o("beN6")),I=o.n(S),x=(o("08XL"),o("24wo")),C=o.n(x),O=o("Dd8w"),D=o.n(O),P=o("yclV"),q=o("uaSg"),T=o("NYxO"),F={computed:D()({},Object(T.b)(["quantity"])),components:(s={},r()(s,C.a.name,C.a),r()(s,I.a.name,I.a),r()(s,M.a.name,M.a),r()(s,b.a.name,b.a),r()(s,f.a.name,f.a),r()(s,_.a.name,_.a),r()(s,k.a.name,k.a),r()(s,m.a.name,m.a),r()(s,u.a.name,u.a),r()(s,d.a.name,d.a),r()(s,a.a.name,a.a),s),data:function(){return{screenWidth:document.body.clientWidth,promotionType:"",showBase:!1,promotionId:"",securitylst:["正品保障","正规发票","自营门店"],param:{},descriptions:[],sku:{tree:[],list:[],none_sku:!0,stock_num:1,collection_id:0,price:"",messages:[{datetime:"0",multiple:"0",name:"留言",type:"text",required:"0"}],hide_stock:!1,resetStepperOnHide:!0,resetSelectedSkuOnHide:!0},goods:{title:"",picture:""},quota:0,skuModel:{},goodsId:"",endTime:""}},mounted:function(){this.promotionId=this.$route.query.promotionId,this.promotionType=this.$route.query.promotionType;var t=this;window.onresize=function(){return window.screenWidth=document.body.clientWidth,void(t.screenWidth=window.screenWidth)},this.getDetail()},methods:{gotoback:function(){this.$router.go(-1)},getDetail:function(){var t=this;Object(q.a)(this,"/api/promotion/promotion",{promotionId:this.promotionId},"get","加载中...",function(e){var o=e.promotion;1==o.limit&&(t.quota=o.limitQuantity),t.formatPrice(o.endTime),o.productOptions&&(t.sku.tree=o.productOptions),o.skus&&(t.sku.none_sku=!1,t.sku.list=o.skus),o.skuModel&&(t.skuModel=o.skuModel,t.sku.stock_num=o.skuModel.stock,t.sku.price=o.skuModel.price,t.sku.collection_id=o.skuModel.skuId,t.goods.picture=o.skuModel.image,t.goods.title=o.skuModel.skuName,t.goodsId=o.skuModel.skuId),t.productDesc()})},productDesc:function(){var t=this;Object(q.a)(this,"/api/mall/productDesc",{skuId:this.skuModel.skuId},"get","",function(e){e.images&&(e.images.descriptions&&(t.descriptions=e.images.descriptions),e.images.param&&(t.param=e.images.param))})},formatPrice:function(t){var e=new Date(t),o=e.getFullYear()+"/",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/",i=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",a=e.getHours()+":",n=e.getMinutes()+":",r=e.getSeconds();this.endTime=o+s+i+a+n+r},showPreview:function(t){a()(this.skuModel.images,t)},showPreviewDetail:function(t){a()(this.descriptions,t)},gotoCar:function(){this.$router.push({name:"shoppingCart",meta:{title:"购物车"}})},gotoOder:function(t){var e="";e=t.selectedSkuComb?t.selectedSkuComb.id:t.goodsId;var o={},s=Object(P.a)("cityInfo");s.cityName?o.location=s.cityName:o.location="重庆",o.orderType=this.promotionType;var i=[],a={};a.skuId=e,a.appliedPromotionId=this.promotionId,a.isPromotionApplied=!0,a.quantity=t.selectedNum,i.push(a),o.products=i,Object(P.e)("oderInfo",o),this.$router.push({name:"orderSubmit"})}}},B={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("yd-layout",[o("yd-navbar",{attrs:{slot:"navbar",title:"商品详情",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[o("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[o("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),o("van-swipe",{staticStyle:{transform:"none"},style:{height:t.screenWidth+"px"},attrs:{autoplay:3e3}},t._l(t.skuModel.images,function(e,s){return o("van-swipe-item",{key:s,staticClass:"thumb"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"image"}],on:{click:function(e){t.showPreview(s)}}})])})),t._v(" "),o("van-cell-group",{attrs:{id:"active"}},[o("van-cell",{staticClass:"actvie"},[o("van-col",{attrs:{span:"10"}},[o("div",{staticClass:"price"},[o("span",[o("em",[t._v("¥")]),t._v(t._s(t.skuModel.price))]),t._v(" "),t.skuModel.salePrice?o("span",{staticClass:"del_price"},[o("em",[t._v("¥")]),t._v(t._s(t.skuModel.salePrice))]):t._e()])]),t._v(" "),o("van-col",{staticStyle:{position:"absolute",right:"10px"}},[o("div",[t._v("距活动结束时间还剩")]),t._v(" "),o("div",[o("yd-countdown",{attrs:{time:t.endTime,id:"times"}},[o("span",[o("em",[t._v("{%d}")])]),t._v("天\n            "),o("span",[o("em",[t._v("{%h}")])]),t._v("小时\n            "),o("span",[o("em",[t._v("{%m}")])]),t._v("时\n            "),o("span",[o("em",[t._v("{%s}")])]),t._v("秒\n          ")])],1)])],1),t._v(" "),o("van-cell",[o("div",{staticClass:"goods-title"},[t._v(t._s(t.skuModel.skuName))]),t._v(" "),o("div",{staticClass:"goods-des"},[t._v(t._s(t.skuModel.skuDescription))])])],1),t._v(" "),o("van-cell-group",{staticStyle:{"margin-top":"0.2rem"}},[o("van-cell",[o("van-col",{staticStyle:{color:"#9c9c9c"},attrs:{span:"10"}},[t._v("剩余："+t._s(t.skuModel.stock)+"件")])],1)],1),t._v(" "),t._e(),t._v(" "),o("van-cell-group",{staticStyle:{"margin-top":"0.2rem","margin-bottom":"1.5rem"}},[o("van-cell",[t._v("\n      商品详情\n    ")]),t._v(" "),o("van-cell",[o("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","border-bottom":"1px solid #f5f5f5"},attrs:{span:"12"}},[t._v("等级:"+t._s(t.param.greade))]),t._v(" "),o("van-col",{staticStyle:{"border-bottom":"1px solid #f5f5f5","padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("规格:"+t._s(t.param.model))]),t._v(" "),o("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","padding-right":"0.2rem"},attrs:{span:"12"}},[t._v("单位:"+t._s(t.param.unit))]),t._v(" "),o("van-col",{staticStyle:{"padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("产地:"+t._s(t.param.place))])],1),t._v(" "),o("van-cell",{staticStyle:{padding:"0px",margin:"0","line-height":"normal"}},[o("div",{staticClass:"detal"},t._l(t.descriptions,function(e,s){return o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"img"}],key:s,on:{click:function(e){t.showPreviewDetail(s)}}})}))])],1),t._v(" "),o("van-goods-action",{attrs:{slot:"tabbar"},slot:"tabbar"},[o("van-goods-action-mini-btn",{attrs:{icon:"chat",text:"客服"}}),t._v(" "),o("van-goods-action-mini-btn",{attrs:{icon:"cart",text:"购物车",info:t.quantity+""},on:{click:function(e){t.gotoCar()}}}),t._v(" "),o("van-goods-action-big-btn",{attrs:{text:"SECKILL"==t.promotionType?"立即购买":"立即开团",primary:""},on:{click:function(e){t.showBase=!t.showBase}}})],1),t._v(" "),o("van-sku",{attrs:{slot:"tabbar",sku:t.sku,goods:t.goods,"goods-id":t.goodsId,"hide-stock":t.sku.hide_stock,quota:t.quota,"reset-stepper-on-hide":t.sku.resetStepperOnHide,"reset-selected-sku-on-hide":t.sku.resetSelectedSkuOnHide},on:{"buy-clicked":t.gotoOder},slot:"tabbar",scopedSlots:t._u([{key:"sku-actions",fn:function(e){return[o("div",{staticClass:"van-sku-actions"},[o("van-button",{attrs:{type:"primary","bottom-action":""},on:{click:function(t){e.skuEventBus.$emit("sku:buy")}}},[t._v("下一步")])],1)]}}]),model:{value:t.showBase,callback:function(e){t.showBase=e},expression:"showBase"}})],1)},staticRenderFns:[]};var N=o("VU/8")(F,B,!1,function(t){o("T15F")},"data-v-485c1782",null);e.default=N.exports},T15F:function(t,e){}});