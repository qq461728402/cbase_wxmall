webpackJsonp([42],{KduV:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("i9vB");var a,n,s=o("Mqtp"),i=o.n(s),r=o("bOdI"),c=o.n(r),d=(o("FDxC"),o("w+oK")),u=o.n(d),l=(o("SpPX"),o("yqud")),m=o.n(l),p=(o("69Li"),o("RI/5")),v=o.n(p),k=(o("mAGR"),o("NYHp")),g=o.n(k),_=(o("JtRP"),o("EJoZ")),h=o.n(_),f=(o("dKGA"),o("kSul")),y=o.n(f),b=(o("QP/A"),o("pyxX")),S=o.n(b),w=(o("cnGM"),o("S6j6")),I=o.n(w),x=(o("G/J0"),o("beN6")),M=o.n(x),O=(o("08XL"),o("24wo")),C=o.n(O),q=o("Dd8w"),D=o.n(q),P=o("yclV"),T=o("uaSg"),N=o("NYxO"),F=(D()({},Object(N.b)(["quantity"])),a={},c()(a,C.a.name,C.a),c()(a,M.a.name,M.a),c()(a,I.a.name,I.a),c()(a,S.a.name,S.a),c()(a,y.a.name,y.a),c()(a,h.a.name,h.a),c()(a,g.a.name,g.a),c()(a,v.a.name,v.a),c()(a,m.a.name,m.a),c()(a,u.a.name,u.a),c()(a,i.a.name,i.a),{computed:D()({},Object(N.b)(["quantity"])),components:(n={},c()(n,C.a.name,C.a),c()(n,M.a.name,M.a),c()(n,I.a.name,I.a),c()(n,S.a.name,S.a),c()(n,y.a.name,y.a),c()(n,h.a.name,h.a),c()(n,g.a.name,g.a),c()(n,v.a.name,v.a),c()(n,m.a.name,m.a),c()(n,u.a.name,u.a),c()(n,i.a.name,i.a),n),data:function(){return{screenWidth:document.body.clientWidth,promotionType:"",showBase:!1,promotionId:"",securitylst:["正品保障","正规发票","自营门店"],param:{},descriptions:[],sku:{tree:[],list:[],none_sku:!0,stock_num:1,collection_id:0,price:"",messages:[{datetime:"0",multiple:"0",name:"留言",type:"text",required:"0"}],hide_stock:!1,resetStepperOnHide:!0,resetSelectedSkuOnHide:!0},goods:{title:"",picture:""},quota:0,skuModel:{},goodsId:"",endTime:""}},mounted:function(){this.promotionId=this.$route.query.promotionId,this.promotionSkuId=this.$route.query.promotionSkuId,this.promotionType=this.$route.query.promotionType;var t=this;window.onresize=function(){return window.screenWidth=document.body.clientWidth,void(t.screenWidth=window.screenWidth)},this.getDetail()},methods:{gotoback:function(){this.$router.go(-1)},getDetail:function(){var t=this;Object(T.a)(this,"/api/promotion/promotion",{promotionSkuId:this.promotionSkuId},"get","加载中...",function(e){var o=e.promotion;1==o.limit&&(t.quota=o.limitQuantity),t.formatPrice(o.endTime),o.productOptions&&(t.sku.tree=o.productOptions),o.skus&&(t.sku.none_sku=!1,t.sku.list=o.skus),o&&(t.skuModel=o,t.sku.stock_num=o.stock,t.sku.price=o.price,t.sku.collection_id=o.productSkuId,t.goods.picture=o.image,t.goods.title=o.skuName,t.goodsId=o.productSkuId),t.productDesc()})},productDesc:function(){var t=this;Object(T.a)(this,"/api/mall/productDesc",{skuId:this.skuModel.productSkuId},"get","",function(e){e.images&&(e.images.descriptions&&(t.descriptions=e.images.descriptions),e.images.param&&(t.param=e.images.param))})},formatPrice:function(t){var e=new Date(t),o=e.getFullYear()+"/",a=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/",n=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",s=e.getHours()+":",i=e.getMinutes()+":",r=e.getSeconds();this.endTime=o+a+n+s+i+r},showPreview:function(t){i()(this.skuModel.images,t)},showPreviewDetail:function(t){i()(this.descriptions,t)},gotoCar:function(){this.$router.push({name:"shoppingCart",meta:{title:"购物车"}})},gotoOder:function(t){var e="";e=t.selectedSkuComb?t.selectedSkuComb.id:t.goodsId;var o={},a=Object(P.a)("cityInfo");a.cityName?o.location=a.cityName:o.location="重庆",o.orderType=this.promotionType;var n=[],s={};s.skuId=e,s.appliedPromotionId=this.promotionId,s.isPromotionApplied=!0,s.quantity=t.selectedNum,n.push(s),o.products=n,Object(P.e)("oderInfo",o),this.$router.push({name:"orderSubmit"})}}}),j={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("yd-layout",[o("yd-navbar",{attrs:{slot:"navbar",title:"商品详情",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[o("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[o("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),o("van-swipe",{staticStyle:{transform:"none"},style:{height:t.screenWidth+"px"},attrs:{autoplay:3e3}},t._l(t.skuModel.images,function(e,a){return o("van-swipe-item",{key:a,staticClass:"thumb"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"image"}],on:{click:function(e){t.showPreview(a)}}})])})),t._v(" "),o("van-cell-group",{attrs:{id:"active"}},[o("van-cell",{staticClass:"actvie"},[o("van-col",{attrs:{span:"10"}},[o("div",{staticClass:"price"},[o("span",[o("em",[t._v("¥")]),t._v(t._s(t.skuModel.price))]),t._v(" "),t.skuModel.salePrice?o("span",{staticClass:"del_price"},[o("em",[t._v("¥")]),t._v(t._s(t.skuModel.salePrice))]):t._e()])]),t._v(" "),o("van-col",{staticStyle:{position:"absolute",right:"10px"}},[o("div",[t._v("距活动结束时间还剩")]),t._v(" "),o("div",[o("yd-countdown",{attrs:{time:t.endTime,id:"times"}},[o("span",[o("em",[t._v("{%d}")])]),t._v("天\n            "),o("span",[o("em",[t._v("{%h}")])]),t._v("小时\n            "),o("span",[o("em",[t._v("{%m}")])]),t._v("时\n            "),o("span",[o("em",[t._v("{%s}")])]),t._v("秒\n          ")])],1)])],1),t._v(" "),o("van-cell",[o("div",{staticClass:"goods-title"},[t._v(t._s(t.skuModel.skuName))]),t._v(" "),o("div",{staticClass:"goods-des"},[t._v(t._s(t.skuModel.skuDescription))])])],1),t._v(" "),o("van-cell-group",{staticStyle:{"margin-top":"0.2rem"}},[o("van-cell",[o("van-col",{staticStyle:{color:"#9c9c9c"},attrs:{span:"10"}},[t._v("剩余："+t._s(t.skuModel.stock)+"件")])],1)],1),t._v(" "),t._e(),t._v(" "),o("van-cell-group",{staticStyle:{"margin-top":"0.2rem","margin-bottom":"1.5rem"}},[o("van-cell",[t._v("\n      商品详情\n    ")]),t._v(" "),o("van-cell",[o("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","border-bottom":"1px solid #f5f5f5"},attrs:{span:"12"}},[t._v("等级:"+t._s(t.param.greade))]),t._v(" "),o("van-col",{staticStyle:{"border-bottom":"1px solid #f5f5f5","padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("规格:"+t._s(t.param.model))]),t._v(" "),o("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","padding-right":"0.2rem"},attrs:{span:"12"}},[t._v("单位:"+t._s(t.param.unit))]),t._v(" "),o("van-col",{staticStyle:{"padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("产地:"+t._s(t.param.place))])],1),t._v(" "),o("van-cell",{staticStyle:{padding:"0px",margin:"0","line-height":"normal"}},[o("div",{staticClass:"detal"},t._l(t.descriptions,function(e,a){return o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"img"}],key:a,on:{click:function(e){t.showPreviewDetail(a)}}})}))])],1),t._v(" "),o("van-goods-action",{attrs:{slot:"tabbar"},slot:"tabbar"},[o("van-goods-action-mini-btn",{attrs:{icon:"chat",text:"客服"}}),t._v(" "),o("van-goods-action-mini-btn",{attrs:{icon:"cart",text:"购物车",info:t.quantity+""},on:{click:function(e){t.gotoCar()}}}),t._v(" "),o("van-goods-action-big-btn",{attrs:{text:"SECKILL"==t.promotionType?"立即购买":"立即开团",primary:""},on:{click:function(e){t.showBase=!t.showBase}}})],1),t._v(" "),o("van-sku",{attrs:{slot:"tabbar",sku:t.sku,goods:t.goods,"goods-id":t.goodsId,"hide-stock":t.sku.hide_stock,quota:t.quota,"reset-stepper-on-hide":t.sku.resetStepperOnHide,"reset-selected-sku-on-hide":t.sku.resetSelectedSkuOnHide},on:{"buy-clicked":t.gotoOder},slot:"tabbar",scopedSlots:t._u([{key:"sku-actions",fn:function(e){return[o("div",{staticClass:"van-sku-actions"},[o("van-button",{attrs:{type:"primary","bottom-action":""},on:{click:function(t){e.skuEventBus.$emit("sku:buy")}}},[t._v("下一步")])],1)]}}]),model:{value:t.showBase,callback:function(e){t.showBase=e},expression:"showBase"}})],1)},staticRenderFns:[]};var B=o("VU/8")(F,j,!1,function(t){o("Tb2l")},"data-v-ded8f31a",null);e.default=B.exports},Tb2l:function(t,e){}});