webpackJsonp([5],{WKVu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("uaSg"),o={data:function(){return{categoryId:"",page:1,pageSize:10,sortType:0,minPrice:"",maxPrice:"",queryKey:"",show4:!1,zh:"#ff0000",xl:"#6d6d6d",jg:"#6d6d6d",list:[],screenlist:[],selectscreenlist:[],priceSorting:1}},mounted:function(){this.$route.query.categoryId&&(this.categoryId=this.$route.query.categoryId),this.$route.query.queryKey&&(this.queryKey=this.$route.query.queryKey),this.page=1,this.products()},methods:{gotoback:function(){this.$router.go(-2)},screenIng:function(){this.show4=!this.show4,this.screenlist.length>0||this.mallbrands()},screenOk:function(){this.show4=!this.show4,this.loadList()},mallbrands:function(){var t=this;Object(s.a)(this,"/api/mall/brands",{},"get","",function(e){t.screenlist=e.brands})},products:function(){var t={categoryId:this.categoryId,page:this.page,pageSize:this.pageSize};0!=this.sortType.length&&(t.sortType=this.sortType),0!=this.maxPrice.length&&(t.maxPrice=this.maxPrice),0!=this.minPrice.length&&(t.minPrice=this.minPrice),0!=this.queryKey.length&&(t.queryKey=this.queryKey),0!=this.selectscreenlist.length&&(t.brandIds=this.selectscreenlist.join(","));var e=this;Object(s.a)(this,"/api/mall/products",t,"post",1==this.page?"加载中...":"",function(t){1==e.page?t.skus&&(e.list=t.skus,e.$refs.pullrefreshDemo.$emit("ydui.pullrefresh.finishLoad"),e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit")):t.skus?(e.list=e.list.concat(t.skus),t.skus&&e.page==t.totalPages?e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone"):e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.finishLoad")):e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone")})},priceSor:function(){this.xl="#6d6d6d",this.zh="#6d6d6d",this.jg="#ff0000",1==this.sortType?this.sortType=2:2!=this.sortType&&""!=this.sortType&&3!=this.sortType||(this.sortType=1),this.loadList()},sales:function(){this.xl="#ff0000",this.zh="#6d6d6d",this.jg="#6d6d6d",this.sortType=3,this.loadList()},comprehensive:function(){this.xl="#6d6d6d",this.zh="#ff0000",this.jg="#6d6d6d",this.sortType=0,this.loadList()},loadList:function(){this.page=1,this.products()},loadMore:function(){this.page=this.page+1,this.products()},gotoDetail:function(t){this.$router.push({name:"productsDetail",query:{skuId:t.skuId},meta:{title:"商品详情"}})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("yd-layout",{attrs:{id:"prolist"}},[i("yd-navbar",{attrs:{slot:"navbar",title:"商品列表",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[i("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[i("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),i("yd-flexbox",{attrs:{slot:"navbar"},slot:"navbar"},[i("yd-flexbox-item",[i("yd-button",{attrs:{size:"large",type:"hollow",bgcolor:"#fff",color:t.zh},nativeOn:{click:function(e){t.comprehensive()}}},[t._v("综合\n      ")])],1),t._v(" "),i("yd-flexbox-item",[i("yd-button",{attrs:{size:"large",type:"hollow",bgcolor:"#fff",color:t.xl},nativeOn:{click:function(e){t.sales()}}},[t._v("销量")])],1),t._v(" "),i("yd-flexbox-item",[i("yd-button",{attrs:{size:"large",type:"hollow",bgcolor:"#fff",color:t.jg},nativeOn:{click:function(e){t.priceSor()}}},[t._v("价格\n        "),1==t.sortType?i("icon",{attrs:{name:"jg-sx",scale:1.5}}):t._e(),t._v(" "),2==t.sortType?i("icon",{attrs:{name:"jg-jx",scale:1.5}}):t._e(),t._v(" "),"#6d6d6d"==t.jg?i("icon",{attrs:{name:"jg-mr",scale:1.5}}):t._e()],1)],1),t._v(" "),i("yd-flexbox-item",[i("yd-button",{attrs:{size:"large",bgcolor:"#fff",type:"hollow",color:"#6d6d6d"},nativeOn:{click:function(e){t.screenIng()}}},[t._v("筛选\n        "),i("icon",{attrs:{name:"sx",scale:1.5}})],1)],1)],1),t._v(" "),i("yd-pullrefresh",{ref:"pullrefreshDemo",attrs:{callback:t.loadList}},[i("yd-infinitescroll",{ref:"infinitescrollDemo",attrs:{callback:t.loadMore}},[i("ul",{staticStyle:{"background-color":"#FFFFFF"},attrs:{slot:"list"},slot:"list"},t._l(t.list,function(e,s){return i("li",{key:s,staticStyle:{"border-bottom":"1px solid #edeeef"}},[i("yd-flexbox",{nativeOn:{click:function(i){t.gotoDetail(e)}}},[i("div",{staticStyle:{overflow:"hidden",padding:"0.15rem",height:"1.8rem",width:"1.8rem"}},[i("img",{staticStyle:{height:"1.5rem",width:"1.5rem"},attrs:{src:e.url}})]),t._v(" "),i("yd-flexbox-item",{staticStyle:{height:"1.8rem"}},[i("yd-flexbox",{staticStyle:{"padding-top":"0.15rem","padding-right":"0.1rem"},attrs:{direction:"vertical"}},[i("yd-flexbox-item",[i("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2","font-size":"0.28rem"}},[t._v(t._s(e.skuName))])]),t._v(" "),i("yd-flexbox-item",[i("p",{staticStyle:{color:"#d41d0f","font-size":"0.25rem","line-height":"0.5rem"}},[t._v("¥"+t._s(e.salePrices)+" "),i("span",{staticStyle:{color:"#6e6f70","text-decoration":"line-through"}},[t._v("¥"+t._s(e.retailPrices))])])]),t._v(" "),i("yd-flexbox-item",[i("span",{staticStyle:{color:"#6e6f70","font-size":"0.25rem","line-height":"0.5rem"}},[t._v("已售 "),i("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.salesCount?e.salesCount:"0"))]),t._v(" | "),i("span",{staticStyle:{color:"#6e6f70"}},[t._v("评论")]),t._v(" "),i("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.reviewCount?e.reviewCount:"0"))])]),t._v(" "),0==e.isAvalible?i("span",{staticStyle:{"font-weight":"bold",color:"#d41d0f"}},[t._v(t._s(e.unAvalibleReson))]):t._e()])],1)],1)],1)],1)})),t._v(" "),i("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[t._v("我是有底线的")])])],1),t._v(" "),i("yd-popup",{attrs:{position:"right",width:"70%"},model:{value:t.show4,callback:function(e){t.show4=e},expression:"show4"}},[i("div",{staticClass:"splb2"},[i("p",{staticClass:"splb3"},[t._v("价格区间")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.minPrice,expression:"minPrice"}],staticClass:"splb4",staticStyle:{"border-radius":"3px"},attrs:{type:"number",placeholder:"最高价"},domProps:{value:t.minPrice},on:{input:function(e){e.target.composing||(t.minPrice=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.maxPrice,expression:"maxPrice"}],staticClass:"splb5",staticStyle:{"border-radius":"3px"},attrs:{type:"number",placeholder:"最低价"},domProps:{value:t.maxPrice},on:{input:function(e){e.target.composing||(t.maxPrice=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"splb6"})]),t._v(" "),i("div",{staticClass:"splb2"},[i("p",{staticClass:"splb3"},[t._v("品牌")]),t._v(" "),i("yd-checkbox-group",{attrs:{color:"#d41d0f"},model:{value:t.selectscreenlist,callback:function(e){t.selectscreenlist=e},expression:"selectscreenlist"}},t._l(t.screenlist,function(e,s){return i("yd-checkbox",{key:s,attrs:{val:e.brandId,shape:"circle"}},[t._v(t._s(e.brandName))])}))],1),t._v(" "),i("div",{staticStyle:{"margin-top":"2rem"}},[i("yd-button",{staticStyle:{width:"80%","margin-left":"10%","font-size":".3rem"},attrs:{size:"large",type:"danger",bgcolor:"#d41d0f",color:"#ffffff"},nativeOn:{click:function(e){t.screenOk()}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(t){i("rRmX"),i("yvk0")},"data-v-0bc36953",null);e.default=l.exports},rRmX:function(t,e){},yvk0:function(t,e){}});