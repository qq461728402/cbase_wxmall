webpackJsonp([6],{"7n6V":function(t,e){},Bxcz:function(t,e,o){"use strict";var s,i=o("bOdI"),r=o.n(i),l=(o("dKGA"),o("kSul")),a=o.n(l),n=(o("jgNZ"),o("syWm")),c=o.n(n),u={components:(s={},r()(s,c.a.name,c.a),r()(s,a.a.name,a.a),s),name:"productlist",props:["productlist","theme"],methods:{gotoDetail:function(t){this.$emit("gotoDetail",t)}}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"productlist"}},[o("yd-list",{attrs:{theme:t.theme}},t._l(t.productlist,function(e,s){return o("yd-list-item",{key:s,nativeOn:{click:function(o){t.gotoDetail(e)}}},[o("div",{attrs:{slot:"img"},slot:"img"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.url,expression:"item.url"}]}),t._v(" "),0==e.isAvalible?o("i",{staticClass:"sell-out"}):t._e()]),t._v(" "),o("span",{staticStyle:{"font-weight":"normal",color:"#000"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.skuName))]),t._v(" "),o("yd-list-other",{attrs:{slot:"other"},slot:"other"},[o("div",[o("span",{staticClass:"demo-list-price",staticStyle:{color:"red"}},[o("em",[t._v("¥")]),t._v(t._s(e.salePrices))]),t._v(" "),o("span",{staticClass:"demo-list-del-price",staticStyle:{"font-size":".2rem","text-decoration":"line-through"}},[o("em",[t._v("¥")]),t._v(t._s(e.retailPrices))])]),t._v(" "),o("div",[o("span",{staticStyle:{color:"#6e6f70"}},[t._v("已售 "),o("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.salesCount?e.salesCount:"0"))]),t._v(" | "),o("span",{staticStyle:{color:"#6e6f70"}},[t._v("评论")]),t._v(" "),o("span",{staticStyle:{color:"#ff7d49"}},[t._v(t._s(e.reviewCount?e.reviewCount:"0"))])]),0==e.isAvalible?o("span",{staticStyle:{"font-weight":"bold",color:"#d41d0f"}},[t._v(t._s(e.unAvalibleReson))]):t._e()])])],1)}))],1)},staticRenderFns:[]};var f=o("VU/8")(u,d,!1,function(t){o("kBYP"),o("zzog")},"data-v-6fa5c8dc",null);e.a=f.exports},Gp7Q:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("Dd8w"),i=o.n(s),r=o("uaSg"),l=o("Bxcz"),a=o("NYxO"),n={computed:i()({},Object(a.b)(["scrollPosion"])),components:{productlist:l.a},data:function(){return{theme:1,categoryId:"",page:1,pageSize:10,queryKey:0,list:[]}},mounted:function(){var t=this;document.getElementById("scrollView").addEventListener("scroll",function(){var e=document.getElementById("scrollView").scrollTop;t.$store.dispatch("setscrollPosion",e)})},beforeRouteEnter:function(t,e,o){o(function(t){"productsDetail"!=e.name?(t.categoryId="",t.$route.query.categoryId&&(t.categoryId=t.$route.query.categoryId),t.queryKey="",t.$route.query.queryKey&&(t.queryKey=t.$route.query.queryKey),t.list=[],t.page=1,t.products()):document.getElementById("scrollView").scrollTop=t.scrollPosion})},methods:{gotoback:function(){this.$router.go(-2)},changeClass:function(){1==this.theme?this.theme=4:this.theme=1},search:function(){this.loadList()},products:function(){var t={categoryId:this.categoryId,page:this.page,pageSize:this.pageSize};0!=this.queryKey.length&&(t.queryKey=this.queryKey);var e=this;Object(r.a)(this,"/api/mall/hot/products",t,"get",1==this.page?"加载中...":"",function(t){1==e.page?t.skus?(e.list=t.skus,e.$refs.pullrefreshDemo.$emit("ydui.pullrefresh.finishLoad"),e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.reInit")):e.list=[]:t.skus?(e.list=e.list.concat(t.skus),t.skus&&e.page==t.totalPages?e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone"):e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.finishLoad")):e.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone")})},loadList:function(){this.page=1,this.products()},loadMore:function(){this.page=this.page+1,this.products()},gotoDetail:function(t){this.$router.push({name:"productsDetail",query:{skuId:t.skuId}})}}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("yd-layout",{attrs:{id:"prolist"}},[o("yd-navbar",{attrs:{slot:"navbar",title:"商品列表",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[o("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[o("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),o("div",{staticStyle:{"background-color":"#ffffff"},attrs:{slot:"navbar",id:"my_search"},slot:"navbar"},[o("yd-flexbox",{staticStyle:{margin:"8px 0","margin-left":"20px"}},[o("yd-flexbox-item",{attrs:{id:"searchId"}},[o("form",{attrs:{action:"javascript:return true;"}},[o("span",{staticClass:"icon_search"}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.queryKey,expression:"queryKey"}],staticClass:"search",attrs:{type:"search",placeholder:"点击搜索"},domProps:{value:t.queryKey},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.search()},input:function(e){e.target.composing||(t.queryKey=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"classification",on:{click:t.changeClass}},[1==t.theme?o("yd-icon",{attrs:{slot:"icon",name:"changyongfenlei",size:".42rem",custom:"",color:"#dcdcdc"},slot:"icon"}):4==t.theme?o("yd-icon",{attrs:{slot:"icon",name:"liebiao",size:".42rem",custom:"",color:"#dcdcdc"},slot:"icon"}):t._e()],1)],1)],1),t._v(" "),o("yd-pullrefresh",{ref:"pullrefreshDemo",attrs:{callback:t.loadList}},[o("yd-infinitescroll",{ref:"infinitescrollDemo",attrs:{callback:t.loadMore}},[o("productlist",{attrs:{slot:"list",productlist:t.list,theme:t.theme},on:{gotoDetail:t.gotoDetail},slot:"list"}),t._v(" "),o("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[t._v("我是有底线的")])],1)],1)],1)},staticRenderFns:[]};var u=o("VU/8")(n,c,!1,function(t){o("7n6V"),o("NqJ8")},"data-v-79dc50d2",null);e.default=u.exports},NqJ8:function(t,e){},kBYP:function(t,e){},zzog:function(t,e){}});