webpackJsonp([53],{EJt6:function(t,e){},KduV:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("i9vB");var i,s=o("Mqtp"),n=o.n(s),a=o("bOdI"),r=o.n(a),c=(o("FDxC"),o("w+oK")),d=o.n(c),l=(o("SpPX"),o("yqud")),u=o.n(l),p=(o("69Li"),o("RI/5")),m=o.n(p),v=(o("mAGR"),o("NYHp")),k=o.n(v),g=(o("JtRP"),o("EJoZ")),_=o.n(g),h=(o("dKGA"),o("kSul")),f=o.n(h),y=(o("QP/A"),o("pyxX")),b=o.n(y),S=(o("cnGM"),o("S6j6")),w=o.n(S),I=(o("G/J0"),o("beN6")),M=o.n(I),x=(o("08XL"),o("24wo")),C=o.n(x),O=o("Dd8w"),P=o.n(O),D=o("yclV"),q=o("uaSg"),B=o("NYxO"),N={computed:P()({},Object(B.b)(["quantity","storeinfo"])),components:(i={},r()(i,C.a.name,C.a),r()(i,M.a.name,M.a),r()(i,w.a.name,w.a),r()(i,b.a.name,b.a),r()(i,f.a.name,f.a),r()(i,_.a.name,_.a),r()(i,k.a.name,k.a),r()(i,m.a.name,m.a),r()(i,u.a.name,u.a),r()(i,d.a.name,d.a),r()(i,n.a.name,n.a),i),data:function(){return{screenWidth:document.body.clientWidth,promotionType:"",showBase:!1,promotionId:"",securitylst:["正品保障","正规发票","自营门店"],param:{},descriptions:[],sku:{tree:[],list:[],none_sku:!0,stock_num:1,collection_id:0,price:"",messages:[{datetime:"0",multiple:"0",name:"留言",type:"text",required:"0"}],hide_stock:!1,resetStepperOnHide:!0,resetSelectedSkuOnHide:!0},goods:{title:"",picture:""},quota:0,skuModel:{},goodsId:"",endTime:""}},mounted:function(){this.promotionId=this.$route.query.promotionId,this.promotionSkuId=this.$route.query.promotionSkuId,this.promotionType=this.$route.query.promotionType;var t=this;window.onresize=function(){return window.screenWidth=document.body.clientWidth,void(t.screenWidth=window.screenWidth)},this.getDetail()},methods:{gotoback:function(){this.$router.go(-1)},getDetail:function(){var t=this;Object(q.a)(this,"/api/promotion/promotion",{promotionSkuId:this.promotionSkuId},"get","加载中...",function(e){var o=e.promotion;1==o.limit&&(t.quota=o.limitQuantity),t.formatPrice(o.endTime),o.productOptions&&(t.sku.tree=o.productOptions),o.skus&&(t.sku.none_sku=!1,t.sku.list=o.skus),o&&(t.skuModel=o,t.sku.stock_num=o.stock,t.sku.price=o.price,t.sku.collection_id=o.productSkuId,t.goods.picture=o.image,t.goods.title=o.skuName,t.goodsId=o.productSkuId),t.productDesc()})},productDesc:function(){var t=this;Object(q.a)(this,"/api/mall/productDesc",{skuId:this.skuModel.productSkuId},"get","",function(e){e.images&&(e.images.descriptions&&(t.descriptions=e.images.descriptions),e.images.param&&(t.param=e.images.param))})},formatPrice:function(t){var e=new Date(t),o=e.getFullYear()+"/",i=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/",s=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",n=e.getHours()+":",a=e.getMinutes()+":",r=e.getSeconds();this.endTime=o+i+s+n+a+r},showPreview:function(t){n()(this.skuModel.images,t)},showPreviewDetail:function(t){n()(this.descriptions,t)},gotoCar:function(){this.$router.push({name:"shoppingCart",meta:{title:"购物车"}})},gotoOder:function(t){var e="";e=t.selectedSkuComb?t.selectedSkuComb.id:t.goodsId;var o={},i=Object(D.a)("cityInfo");i.cityName?o.location=i.cityName:o.location="重庆",o.orderType=this.promotionType;var s=[],n={};n.skuId=e,n.appliedPromotionId=this.promotionId,n.isPromotionApplied=!0,n.quantity=t.selectedNum,s.push(n),o.products=s,Object(D.e)("oderInfo",o),this.$router.push({name:"orderSubmit"})}},onClickMiniBtn:function(){window.location.href="tel://"+this.storeinfo.storePhone}},T={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("yd-layout",[o("yd-navbar",{attrs:{slot:"navbar",title:"商品详情",bgcolor:"#d41d0f",color:"#FFF"},slot:"navbar"},[o("router-link",{attrs:{slot:"left",to:""},nativeOn:{click:function(e){t.gotoback()}},slot:"left"},[o("yd-navbar-back-icon",{attrs:{color:"#FFF"}})],1)],1),t._v(" "),o("van-swipe",{staticStyle:{transform:"none"},style:{height:t.screenWidth+"px"},attrs:{autoplay:3e3}},t._l(t.skuModel.images,function(e,i){return o("van-swipe-item",{key:i,staticClass:"thumb"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"image"}],on:{click:function(e){t.showPreview(i)}}})])})),t._v(" "),o("van-cell-group",{attrs:{id:"active"}},[o("van-cell",{staticClass:"actvie"},[o("van-col",{attrs:{span:"10"}},[o("div",{staticClass:"price"},[o("span",[o("em",[t._v("¥")]),t._v(t._s(t.skuModel.price))]),t._v(" "),t.skuModel.salePrice?o("span",{staticClass:"del_price"},[o("em",[t._v("¥")]),t._v(t._s(t.skuModel.salePrice))]):t._e()])]),t._v(" "),o("van-col",{staticStyle:{position:"absolute",right:"10px"}},[o("div",[t._v("距活动结束时间还剩")]),t._v(" "),o("div",[o("yd-countdown",{attrs:{time:t.endTime,id:"times"}},[o("span",[o("em",[t._v("{%d}")])]),t._v("天\n            "),o("span",[o("em",[t._v("{%h}")])]),t._v("小时\n            "),o("span",[o("em",[t._v("{%m}")])]),t._v("时\n            "),o("span",[o("em",[t._v("{%s}")])]),t._v("秒\n          ")])],1)])],1),t._v(" "),o("van-cell",[o("div",{staticClass:"goods-title"},[t._v(t._s(t.skuModel.skuName))]),t._v(" "),o("div",{staticClass:"goods-des"},[t._v(t._s(t.skuModel.skuDescription))])])],1),t._v(" "),o("van-cell-group",{staticStyle:{"margin-top":"0.2rem"}},[o("van-cell",[o("van-col",{staticStyle:{color:"#9c9c9c"},attrs:{span:"10"}},[t._v("剩余："+t._s(t.skuModel.stock)+"件")])],1)],1),t._v(" "),t._e(),t._v(" "),o("van-cell-group",{staticStyle:{"margin-top":"0.2rem","margin-bottom":"1.5rem"}},[o("van-cell",[t._v("\n      商品详情\n    ")]),t._v(" "),o("van-cell",[o("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","border-bottom":"1px solid #f5f5f5"},attrs:{span:"12"}},[t._v("等级:"+t._s(t.param.greade))]),t._v(" "),o("van-col",{staticStyle:{"border-bottom":"1px solid #f5f5f5","padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("规格:"+t._s(t.param.model))]),t._v(" "),o("van-col",{staticStyle:{"border-right":"1px solid #f5f5f5","padding-right":"0.2rem"},attrs:{span:"12"}},[t._v("单位:"+t._s(t.param.unit))]),t._v(" "),o("van-col",{staticStyle:{"padding-left":"0.2rem"},attrs:{span:"12"}},[t._v("产地:"+t._s(t.param.place))])],1),t._v(" "),o("van-cell",{staticStyle:{padding:"0px",margin:"0","line-height":"normal"}},[o("div",{staticClass:"detal"},t._l(t.descriptions,function(e,i){return o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"img"}],key:i,on:{click:function(e){t.showPreviewDetail(i)}}})}))])],1),t._v(" "),o("van-goods-action",{attrs:{slot:"tabbar"},slot:"tabbar"},[o("van-goods-action-mini-btn",{attrs:{icon:"chat",text:"客服"},on:{click:t.onClickMiniBtn}}),t._v(" "),o("van-goods-action-mini-btn",{attrs:{icon:"cart",text:"购物车",info:t.quantity+""},on:{click:function(e){t.gotoCar()}}}),t._v(" "),o("van-goods-action-big-btn",{attrs:{text:"SECKILL"==t.promotionType?"立即购买":"立即开团",primary:""},on:{click:function(e){t.showBase=!t.showBase}}})],1),t._v(" "),o("van-sku",{attrs:{slot:"tabbar",sku:t.sku,goods:t.goods,"goods-id":t.goodsId,"hide-stock":t.sku.hide_stock,quota:t.quota,"reset-stepper-on-hide":t.sku.resetStepperOnHide,"reset-selected-sku-on-hide":t.sku.resetSelectedSkuOnHide},on:{"buy-clicked":t.gotoOder},slot:"tabbar",scopedSlots:t._u([{key:"sku-actions",fn:function(e){return[o("div",{staticClass:"van-sku-actions"},[o("van-button",{attrs:{type:"primary","bottom-action":""},on:{click:function(t){e.skuEventBus.$emit("sku:buy")}}},[t._v("下一步")])],1)]}}]),model:{value:t.showBase,callback:function(e){t.showBase=e},expression:"showBase"}})],1)},staticRenderFns:[]};var F=o("VU/8")(N,T,!1,function(t){o("EJt6")},"data-v-7ff2dea7",null);e.default=F.exports}});